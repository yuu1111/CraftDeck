# CraftDeckへの貢献ガイド

CraftDeckプロジェクトへの貢献に興味を持っていただき、ありがとうございます！このドキュメントでは、貢献者向けのガイドラインと情報を提供しています。

## 🤝 貢献方法

### バグ報告

バグレポートを作成する前に、重複を避けるため[既存のissue](../../issues)を確認してください。

バグを報告する際は、以下の情報を含めてください：
- **環境の詳細**: OS、Javaバージョン、Minecraftバージョン、modローダー
- **再現手順**: 問題を再現するための明確な手順
- **期待される動作**: 期待していた動作
- **実際の動作**: 実際に発生した動作
- **ログ**: 関連するエラーメッセージやログファイル
- **スクリーンショット**: 該当する場合は、問題の視覚的な証拠

### 機能の提案

機能提案は歓迎します！以下の点にご注意ください：
- 既存の[機能リクエスト](../../issues?q=is%3Aissue+is%3Aopen+label%3Aenhancement)を確認する
- 機能とその利点を明確に説明する
- CraftDeckの目標にどのように適合するか説明する
- 実装の複雑さとメンテナンスを考慮する

### コードによる貢献

#### 開発環境のセットアップ

1. **リポジトリをフォーク**し、フォークをクローンする
2. **開発環境をセットアップ**する：
   ```bash
   # Minecraft mod開発の場合
   cd craftdeck-mod
   ./gradlew build

   # Stream Deckプラグイン開発の場合
   cd craftdeck-plugin
   dotnet build
   ```

#### コードスタイルガイドライン

**Minecraft Mod (Kotlin)**
- [Kotlinコーディング規約](https://kotlinlang.org/docs/coding-conventions.html)に従う
- インデントには4つのスペースを使用
- 最大行長：120文字
- 意味のある変数名と関数名を使用
- 公開APIにはKDocコメントを追加

**Stream Deckプラグイン (C#)**
- [C#コーディング規約](https://docs.microsoft.com/en-us/dotnet/csharp/fundamentals/coding-style/coding-conventions)に従う
- インデントには4つのスペースを使用
- 公開メンバーにはPascalCaseを使用
- プライベートメンバーにはcamelCaseを使用
- 公開APIにはXMLドキュメントを追加

#### コミットガイドライン

- 明確で説明的なコミットメッセージを使用
- フォーマット: `type(scope): description`
- タイプ: `feat`, `fix`, `docs`, `style`, `refactor`, `test`, `chore`
- 例：
  ```
  feat(mod): インベントリデータ収集を追加
  fix(plugin): 接続タイムアウト問題を解決
  docs(readme): インストール手順を更新
  ```

#### プルリクエストのプロセス

1. **`main`から機能ブランチを作成**する：
   ```bash
   git checkout -b feature/your-feature-name
   ```

2. コードスタイルガイドラインに従って**変更を加える**

3. **徹底的にテスト**する：
   - Minecraft mod: 複数のmodローダーでテスト
   - Stream Deckプラグイン: 異なるStream Deckモデルでテスト
   - WebSocket通信が正しく動作することを確認

4. 必要に応じて**ドキュメントを更新**する

5. 以下を含む**プルリクエストを作成**する：
   - 明確なタイトルと説明
   - 関連するissueへの参照
   - 変更内容のリスト
   - 該当する場合はスクリーンショット/動画

## 🏗️ アーキテクチャガイドライン

### Minecraft Modアーキテクチャ

- **共通モジュール**: 全modローダー間で共有されるロジック
- **プラットフォームモジュール**: modローダー固有の実装
- **WebSocketサーバー**: 全クライアント接続を処理
- **データ収集**: ゲーム状態情報を収集
- **コマンド実行**: 受信コマンドを処理

### Stream Deckプラグインアーキテクチャ

- **メインアクション**: 主要なプラグインアクションハンドラー
- **WebSocketクライアント**: サーバー接続を管理
- **プロパティインスペクター**: 設定UI
- **データ表示**: ゲーム情報をフォーマットして表示
- **コマンド送信**: コマンドをフォーマットしてmodに送信

### 通信プロトコル

- **JSON形式**: 全メッセージはJSON形式を使用
- **タイプベース**: 各メッセージはルーティング用の`type`フィールドを持つ
- **双方向**: modとプラグインの両方が通信を開始可能
- **エラーハンドリング**: 接続問題の適切な処理

## 🧪 テスト

### Minecraft Modのテスト

```bash
# Fabric開発クライアントを実行
./gradlew :fabric:runClient

# Forge開発クライアントを実行
./gradlew :forge:runClient

# Quilt開発クライアントを実行
./gradlew :quilt:runClient
```

### Stream Deckプラグインのテスト

```bash
# ビルドしてStream Deckにデプロイ
dotnet build

# 手動テスト手順：
# 1. ビルドしたプラグインをStream Deckソフトウェアにインストール
# 2. CraftDeckアクションをStream Deckに追加
# 3. modを含むMinecraftを起動
# 4. 通信とデータ表示を確認
```

### 統合テスト

1. CraftDeck modを含むMinecraftを起動
2. WebSocketサーバーがポート8080で起動することを確認
3. Stream Deckプラグインをインストールして設定
4. データフローをテスト: mod → プラグイン
5. コマンド実行をテスト: プラグイン → mod
6. エラーハンドリングと再接続をテスト

## 📚 ドキュメント

### コードドキュメント

- **Kotlin**: 公開APIにはKDoc形式を使用
- **C#**: XMLドキュメントコメントを使用
- **例**: 複雑な機能には使用例を提供
- **アーキテクチャ**: 設計の決定とパターンを文書化

### ユーザードキュメント

- READMEファイルを最新に保つ
- 新機能のためのwikiページを更新
- 明確なインストールと設定の手順を提供
- トラブルシューティングガイドを含める

## 🔍 コードレビュープロセス

### レビュー基準

- **機能性**: コードが意図通りに動作する
- **パフォーマンス**: 不必要なパフォーマンスへの影響がない
- **セキュリティ**: セキュリティの脆弱性が導入されていない
- **保守性**: コードが読みやすく、よく構造化されている
- **テスト**: 適切なテストカバレッジ
- **ドキュメント**: 新機能の適切なドキュメント

### レビュータイムライン

- 初回レビュー: 48時間以内
- フォローアップレビュー: 24時間以内
- 複雑な変更には追加のレビュー時間が必要な場合があります

## 🚀 リリースプロセス

### バージョン番号付け

[セマンティックバージョニング](https://semver.org/)を使用しています：
- **MAJOR**: 破壊的変更
- **MINOR**: 新機能（後方互換性あり）
- **PATCH**: バグ修正（後方互換性あり）

### リリースチェックリスト

- [ ] 全テストが合格
- [ ] ドキュメントが更新済み
- [ ] CHANGELOG.mdが更新済み
- [ ] バージョン番号が更新済み
- [ ] リリースノートが準備済み
- [ ] アーティファクトがビルドおよびテスト済み

## 📞 コミュニケーション

### ヘルプを得る

- **Issues**: バグや機能リクエストにはGitHub issuesを使用
- **Discussions**: 質問やアイデアにはGitHub discussionsを使用
- **コードレビュー**: コード固有の議論にはプルリクエストのコメントを使用

### コミュニティガイドライン

- 敬意を持ち、包括的である
- 建設的なフィードバックを提供する
- 新規参加者の開始を助ける
- プロジェクトの目標とユーザーのニーズに焦点を当てる

## 📄 ライセンス

CraftDeckに貢献することで、あなたの貢献がMITライセンスの下でライセンスされることに同意したものとみなされます。

---

CraftDeckへの貢献をありがとうございます！あなたの努力により、MinecraftとStream Deckの統合がすべての人にとってより良いものになります。